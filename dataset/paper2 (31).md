# Разработка приложения по генерации формализованных требований к информационной системе
Ключевые слова: Машинное обучение, классификация требований, извлечение сущностей


## Аннотация
Описание требований и построение ER-диаграмм – процессы, которых нельзя избежать, при создании информационной системы. С появлением современных технологий, таких как обработка естественного языка и машинное обучение, появились возможности для автоматизации упомянутых действий.
В документе описан процесс создания веб-приложения, которое позволяет пользователю генерировать формализованные требования к системе, и ее ER-диаграмму на основе неформального описания системы. В качестве основного результата представлена архитектура решения и возможности использования бесплатных компонентов и модулей. Существующие подходы и программное обеспечение для решения обсуждаемых задач также описаны.


## Введение
Задача полной автоматизации создания информационных систем с давних времен интересует разработчиков [11]. Одними из этапов разработки системы являются определение требований к ней, а также проектирование базы данных системы. В данной статье рассматриваются подходы к решению задач, встающих перед приложением, создаваемым с целью автоматизации данных процессов. На основе рассмотренных подходов предлагается архитектура веб-приложения, позволяющего сформировать формализованные требования к системе, на основе описания создаваемой системы пользователем. Также рассматривается построение возможной базы данных системы при помощи генерации ER-диаграммы.
Основными задачами при разработке рассматриваемого приложения являются задачи классификации требований и генерации ER-диаграммы по тексту, поэтому основной акцент в статье сделан на них. При решении данных задач активно используются такие технологии как обработка естественного языка (NLP) и машинное обучение (ML).


## Существующие решения

### A. Классификация требований
Методы классификации требований выбирались на основе количества цитирований статей, связанных с данным методом. Далее для сравнения были отобраны методы, протестированные на одном датасете [9].

### Latent Dirichlet allocation
Cкрытое распределение Дирихле (LDA) можно описать, как генеративную вероятностную модель для коллекций
дискретных данных, таких как текстовые корпуса. LDA - это трехуровневая иерархическая байесовская модель, в которой каждый элемент коллекции моделируется как конечная смесь по основному набору тем. Каждая тема в свою очередь моделируется как бесконечная смесь по основному набору вероятностей тем [8]. Данный алгоритм зарекомендовал себя в кластеризации коротких текстов, например, таких как твиты [10].

###  Biterm Topic Model
BTM моделирует темы на основе шаблонов совпадения слов и изучает темы, изучая слово-слово паттерны. Некоторые недавние исследования по применению тематического моделирования при классификации кратких текстовых документов установили, что подход BTM обладает лучшими способностями в моделировании кратких и разреженных текстов, типичных для технических требований.

### Hierarchical clustering
Иерархический (т.е. агломерационный) алгоритм сначала присваивает каждый документ своему кластеру и итеративно объединяет кластеры, которые находятся ближе всего друг к другу, до тех пор, пока весь корпус не образует единый кластер. Структура, получаемая в результате работы алгоритма, более информативна, чем неструктурированный набор кластеров, возвращаемых плоской кластеризацией.

### K-means
Это итеративный алгоритм, который случайным образом классифицирует документы на определенное количество кластеров K. K-средних работает итеративно, присваивая каждую точку данных в пространстве
ближайшему одиночному кластеру из K-кластеров. Является алгоритмом обучения без учителя, что позволяет применять его без обучающего датасета.

### Naive Bayes classifier
Это статистический метод, основанный на байесовской теореме, с сильным «допущением независимости между признаками». NB вычисляет вероятность отношения документа к конкретному предопределенному классу, с помощью
некоторых статистических функций. В результате работы определяется класс документа с наибольшей вероятностью. Данный алгоритм принадлежит группе алгоритмов обучения с учителем - для его использования необходимо наличие обучающих данных.

## Критерии сравнения

### Точость
Точность измеряет общее количество правильно
классифицированных требований в отношении количества извлеченных требований, и является одним из самых важных критериев, так как перед приложением стоит цель точно определять тип требаования, к которому он принадлежит.

### Полнота
Полнота измеряет процент требований, которые были правильно классифицированы, среди всех требований. Наряду с точностью имеет высокий приоритет, так как важно распознать наибольшее число требований во входных данных. 

### Обучение с учителем
Необходимость наличия обучающих данных для использования алгоритма. Определяет, необходимо ли выполнять поиск, и в дальнейшем применять датасет с вручную классифицированными требованиями.

### Сравнение
В таблице 1 представлено сравнение алгоритмов, применимых для классификации требований.

|   |  Точность, % | Полнота, % | Обучение с учителем
| --- | --- | --- | --- |
| Latent Dirichlet allocation | 31 | 31 | Нет |
| Biterm Topic Model | 3 | 3 | Нет |
| Hierarchical clustering | 16 | 16 | Нет |
| K-means | 15 | 15 | Да | Нет |
| Naive Bayes classifier | 45 | 45 | Да |

Таблица 1 - сравнение алгоритмов для классификации требований

### B. Генерация ER-диаграмм
Средства генерации выбирались на основе количества цитирований статей, связанных с данным средством, а также задач, встающих перед рассматриваемым приложением.

### Dialogue tool [1]
Является частью системы проектирования БД RADD. Устанавливается модерируемый диалог с дизайнером БД. Информация, полученная в ходе диалога, подвергается синтаксическому и семантическому анализу. Результаты анализа используются в прагматической интерпретации, целью которой является отображение информации, поданной на естественном языке, в EER-диаграмму.

### CM-builder [2]
CM-Builder использует методы обработки естественного языка для анализа текстов требований к программному обеспечению, написанных на английском языке, и строит интегрированную модель дискурса обработанного текста, представленного в виде семантической сети.
Затем эта семантическая сеть используется для автономного построения начальной модели классов UML, представляющей классы и отношения между ними.

### ER-converter [3]
В ER-converter используются эвристики, собранные из [4], [5], [6] вместе с эвристиками, предложенными самими авторами. Также используются веса эвристик, которые присваиваются им в соответствии с уровнем уверенности в том, что событие есть истина. Для разрешения спорной ситуации, когда существительное может являться сущностью или атрибутом, используется взаимодействие с пользователем.

### DBDT [7]
В DBDT используются подходы, использованные в работах, упомянутых ранее, но при описании системы используется контролируемый язык.

## Критерии сравнения

### Точость
Точность измеряет общее количество правильно
классифицированных сущностей и их атрибутов в отношении количества извлеченных.

### Полнота
Полнота измеряет процент сущностей и их атрибутов, которые были правильно распознаны, среди всех сущностей и атрибутов.

###  Контролируемый язык
Необходимость строить предложения, придерживаясь определенных правил. Накладывает огранияения на входящие данные.

### Сравнение
В таблице 2 представлено сравнение средств, решающих задачу генерации ER-диаграммы по тексту.

|   |  Точность, % | Полнота, % | Контролируемый язык
| --- | --- | --- | --- |
| Dialogue tool | - | - | Да |
| CM-builder | 66 | 73 | Нет |
| ER-converter | 82 | 95 | Нет |
| DBDT* | - | - | Да |

Таблица 2 - сравнение средств генерации ER-диаграмм

*Процент правильно сгенерированных диаграмм около 88%

### Выбор метода решения
В результате обзора аналогов было выявлено, что наилучшие результаты по точности и полноте среди алгоритмов для классификации требований показывают наивный байесовский классификатор и скрытое распределение Дирихле. Так точность и полнота являются основными критериями, принято решение использовать более точный байесовский классификатор, несмотря на необходимость использовать обучающие данные. Был осуществлен поиск датасетов, которые можно было бы применить в данном случае для обучения. Датасетов, включающих в себя требования на русском языке, обнаружено не было. Были найдены датасет из PROMISE репозитория [12], а также корпус созданный членами универститета «Конкордия» Монреаль, Канада [13]. Так как данные в них представлены на английском языке, необходимо выполнить их перевод на русский.

Среди средств для генерации ERD лучший результат показало средство ER-converter, в котором использовались наработки из других ислледований. Стоит отметить, что большая и основная часть алгоритмов практически идентична для каждого средства. Выполняются морфологический, синтаксический и семантический анализы текста. Для решения данных задач разумно выбрать средство, хорошо показавшее себя на сорвеновании [14], например Stanford parser, или UDPipe. В дальнейшем предполагается основываться на подходах, использовавшихся в ER-converter.

## Описание метода решения
![](resources/arch.png)
Рисунок 1 – Архитектура предлагаемого решения

На рисунке 1 представлена предлагаемая архитектура приложения.
На уровне представления предполагается использовать фреймворк Vue.js, который на данный момент является одним из самых популярных front-end фреймворком, с одним из самых высоких рейтингов среди разработчиков [15]. Активное взаимодействие с пользователем будет реализовано за счет гибких и мощных возможностей языка  JavaScript.
На стороне сервера используется back-end фреймворк Django, так как он хорошо зарекомендовал себя при создании крупных веб-приложений [16], обладает большим сообществом разработчиков, а также для языка Python, который используется в нем, существует большое количество библиотек для машинного обучения, и других задач, ложащихся на серверную часть приложения. Для обслуживания сервера предполагается использовать Nginx.
В качестве базы данных предполагается использовать MongoDB, являющуюся самым популярным NoSQL решением на момент написания статьи [17]. Выбор пал на MongoDB, так как она гибче, чем SQL решения, что потенциально предоставляет больше возможностей при работе с данными и их хранении.
В приложении предусмотрена система авторизации, чтобы предоставить пользователям возможность сохранять свои проекты, включающие требования, и возвращаться к работе с ними в любой момент.
Данные от пользователя могут подаваться в виде текстового документа, или же путем ввода текста с клавиатуры.

На рисунке 2 представлен алгоритм классификации требований с учетом выбранного ранее метода решения в этой части работы рассматриваемого приложения.

![](resources/classification_arch.png)
Рисунок 2 - алгоритм классификации требований

Генерация ER-диаграммы призвана помочь пользователю убедиться в полноте функциональных требований, предъявляемых к системе, а также может послужить основой базы данных для разрабатываемой системы. За основу взят алгоритм, описанный в [3]. При этом реализуется следующая последовательность работы:
- Морфологический анализ требований пользователя.
- Синтаксический анализ требований.
- Семантический анализ требований.
- Интеграция дискурса.
- Извлечение сущностей, атрибутов и связей.

Рассмотрим пример применения предложенного решения. 
```
Следующий текст поступает в систему на русском языке.
Система представляет собой электронную библиотеку.
В библиотеке должны хранится описания книг.
У книги есть её идентификатор, название и автор.
У книги должен быть статус («хранится» или «выдана»).
Для книги должно быть указан период времени, на который пользователь её может взять.
В карточку книги записывается идентификатор пользователя, взявшего книгу, и дата, когда она была взята пользователем.
Пользователи регистрируются в библиотеке, могут брать и возвращать книги.
Авторизация пользователей выполняется с использованием логина и пароля.
Должна быть предусмотрена регистрация новых пользователей.
Сервер должен отвечать на запросы не более чем за 5 секунд.
Книга может быть выдана только авторизованному пользователю.
Пользователю должны быть недоступны данные других пользователей.
Система должна иметь интуитивно понятный интерфейс.
Пользователи с ролью администратор должны иметь возможность просматривать информацию о наличии книг.
```
В результате система формирует следующие функциональные требования:
- В библиотеке хранятся описания книг.
- У книги есть идентификатор, название, автор, статус, время выдачи пользователю.
- Статус принимает значения «хранится», «выдана».
- Пользователи регистрируются в библиотеке.
- Пользователи берут книги из библиотеки на ограниченное время.
- Авторизация пользователей осуществляется на основании логина и пароля.
- Пользователи регистрируются в библиотеке.
- Должна быть предусмотрена регистрация новых пользователей.
- Пользователи с ролью администратор должны иметь возможность просматривать информацию о наличии книг.
- В карточку книги записывается идентификатор пользователя, взявшего книгу, и дата, когда она была взята пользователем.
Требования безопасности.
- Книга может быть выдана только авторизованному пользователю.
- Пользователю должны быть недоступны данные других пользователей.
Требования производительности.
- Сервер должен отвечать на запросы не более чем за 5 секунд.

Результирующая ER-диаграмма описывается в формате XML.
```xml
<entity id=“1”>
  <name>Книга</name>
  <attribute>
    <name>Идентификатор</name><key>true</key>
  </attribute>
  <attribute>
    <name>Название</name><key>false</key>
  </attribute>
  <attribute>
    <name>Автор</name><key>false</key>
  </attribute>
  <attribute>
    <name>Статус</name><key>false</key>
  </attribute>
  <attribute>
    <name>Период времени</name><key>false</key>
  </attribute>
</entity>
<entity id=“2”>
  <name>Пользователь</name>
  <attribute>
    <name>Идентификатор</name><key>true</key>
  </attribute>
  <attribute>
    <name>Логин</name><key>false</key>
  </attribute>
  <attribute>
    <name>Пароль</name><key>false</key>
  </attribute>
</entity>
<entity id=“3”>
  <name>Книга</name>
  <attribute>
    <name>Идентификатор пользователя</name><key>true</key>
  </attribute>
  <attribute>
    <name>Идентификатор книги</name><key>true</key>
  </attribute>
  <attribute>
    <name>Дата</name><key>false</key>
  </attribute>
</entity>
<relation>
    <entity>
        <id>1</id>
        <multiple>false</multiple>
        <mandatory>true</mandatory>
    </entity>
    <entity>
        <id>3</id>
        <multiple>false</multiple>
        <mandatory>false</mandatory>
    </entity>
</relation>
<relation>
    <entity>
        <id>2</id>
        <multiple>false</multiple>
        <mandatory>true</mandatory>
    </entity>
    <entity>
        <id>3</id>
        <multiple>true</multiple>
        <mandatory>false</mandatory>
    </entity>
</relation>
```

На рисунке 3 представлены формализованные требования.

![](resources/formalised_reqs.png)
Рисунок 3 - формализованные требования

Полученный результат позволяет с одной стороны систематизировать и классифицировать требования, с другой стороны упростить формирование ER-диаграммы для хранения данных по заданным требованиям.

## Заключение
В результате получена архитектура приложения по генерации формализованных требований к системе. Описаны методы и средства реализации функциональности приложения, использованные при решении аналогичных задач. Будущие исследования и эксперименты позволят приблизиться к решению задачи полной автоматизации создания информационных систем.