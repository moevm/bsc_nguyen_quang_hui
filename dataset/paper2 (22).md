# Разработка подхода к созданию мобильного приложения для распознавания контуров трафаретов и раскладки их с целью уменьшения затрат материалов

Ключевые слова: раскладка трафаретов, контур трафарета, трафарет произвольной формы, программное решение

## Аннотация
Целью данной статьи является разработка подхода к созданию мобильного приложения для распознавания контуров трафаретов и раскладки их с целью уменьшения затрат материалов. В данной статье рассмотрены причины необходимости создания такого приложения, выполнен сравнительный анализ существующих программных решений проблемы задания трафаретов произвольной формы и раскладки их на плоскости. При сравнительном анализе аналогов были выявлены их недостатки, которые были учтены при формировании функциональных требований к новому приложению.

## Введение
Алгоритмы разложения трафаретов в настоящее время используются во многих областях промышленности. Основной их целью является оптимальное расположение объектов в двухмерном или трёхмерном пространстве для расчёта и снижения количества материала, из которого они будут изготавливаться. Совмещение возможности задания контуров трафаретов и разложения их на плоскости с заданными параметрами в одном приложении позволяет отказаться от использования нескольких программ для решения данных проблем, что является удобным, так как сокращает затрачиваемые ресурсы на их решение. На данный момент не существует аналогов, которые выполняли бы обе функции и работали бы на мобильном устройстве. Также для задания контуров трафаретов зачастую требуется наличие специальных навыков, что ограничивает круг пользователей данного программного продукта.

Прежде чем приступать к решению проблемы программного решения задачи раскладки трафаретов произвольной формы в прямоугольнике, одна из сторон которого задана, на мобильном устройстве, необходимо произвести обзор уже существующих решений с целью выявления их недостатков и достоинств, которые необходимо учесть при проектировании и реализации нового программного продукта. Следовательно, цель данной работы - формирование требований к новому программному решению проблемы, которое представляет собой мобильное приложение с функциями распознавания трафаретов произвольной формы и раскладки их в прямоугольнике, одна из сторон которого задана. Объектом исследования данной работы является программное решение проблемы раскладки трафаретов произвольной формы на плоскости. Предмет исследования - применимость рассматриваемых аналогов для работы в полностью (или частично) автономном режиме. Для достижения поставленной цели необходимо произвести обзор существующих программных решений проблемы, выявить их недостатки и сформировать требования к новому программному решению поставленной проблемы.

## Обзор предметной области
Для того, чтобы сформировать требования к новому программному решению задачи раскладки трафаретов произвольной формы в прямоугольнике, одна из сторон которого задана, на мобильном устройстве, необходимо рассмотреть существующие программные решения. Аналоги обязательно должны обладать возможностью задания трафаретов произвольной формы и разложения их оптимальным образом. Поиск программных решений поставленной проблемы производился при помощи ключевых словосочетаний "раскрой материала", "nesting problem" и "cutting and packing". Среди множества аналогов, относящихся к классам приложений для desktop-компьютеров и веб-сервисов, были выбраны те, которые максимально отличаются своими возможностями или характеристиками. Это необходимо для того, чтобы охватить больший спектр функциональных возможностей решения проблемы. Ниже представлены краткие описания пяти выбранных аналогов.

**NestFab** [1] - программное обеспечение для раскладки трафаретов произвольной формы для оптимизации затрат материала со следующими функциями: 
- позволяет настраивать размеры контейнера;
- позволяет дублировать трафареты.

**AutoNest** [2] - программное обеспечение для раскладки трафаретов произвольной формы для оптимизации затрат материала со следующими функциями:
- существует возможность подключения к режущим устройствам для автоматизации процесса раскроя по вычисленной раскладке;
- позволяет задавать произвольную форму контейнера;
- позволяет пользователю вносить изменения в раскладку; 
- учитывает рисунок материала; 
- позволяет размещать трафареты внутри невыпуклых трафаретов.

**Nest&Cut** [3] - программное обеспечение для раскладки трафаретов произвольной формы для оптимизации затрат материала со следующими функциями:
- существует возможность подключения к режущим устройствам для автоматизации процесса раскроя по вычисленной раскладке;
- позволяет задавать для раскладки сразу несколько прямоугольных контейнеров произвольного размера;
- позволяет размещать трафареты внутри невыпуклых трафаретов;
- позволяет пользователю задавать направление раскладки трафарета.

**SVGNest** [4] - программное обеспечение для раскладки трафаретов произвольной формы для оптимизации затрат материала со следующими функциями:
- позволяет задавать произвольную форму контейнера;
- при разложении поворачивает трафареты только под прямым углом;
- имеет открытый код. 

**Автораскладка OPTiPACK** [5] - программное обеспечение для раскладки трафаретов произвольной формы для оптимизации затрат материала со следующими функциями:
- отслеживает все ограничения и технологические условия раскроя (рисунок, ворс, зазоры между лекалами и пр.);
- поддерживаются различные режимы для раскладки сложной конфигурации;
- позволяет дублировать трафареты;
- позволяет пользователю вносить изменения в раскладку;
- позволяет производить раскладку вручную.

Сравнение аналогов проводилось по трём критериям: "способ задания трафаретов", "поддерживаемые платформы" и "возможность задания контейнера". Подробное описание каждого из них представлено далее.

1. **Способ задания трафаретов**. 
Так как трафареты, участвующие в раскладке, имеют произвольную форму, существует проблема их задания. Существует несколько способов решения данной проблемы: c помощью специальных файлов, во встроенном редакторе в самом приложении, с помощью сканирования и тому подобное.

2. **Поддерживаемые платформы**.
Требования к устройствам и/или операционным системам, предъявляемые программными решениями задачи раскладки трафаретов произвольной формы. Чем меньше ограничений, тем большее количество пользователей сможет воспользоваться данным программным продуктом.  

3. **Возможность задания контейнера**.
Возможность задания формы и/или размеров контейнера, которая расширяет круг множества задач, которые может решить программа. Стандартная форма контейнера - прямоугольник.

Результаты сравнения по данным критериям представлены ниже в таблице 1.

Таблица 1 - Сравнение аналогов

| Критерии сравнения             | NestFab    | AutoNest            | Nest&Cut    | SVGNest     | Автораскладка OPTiPACK   |
| ------------------------------ | ---------- | ------------------- | ----------- | ----------- | ------------------------ |
| Способ задания трафаретов      | CAD файл   | Встроенный редактор | DXF файл    | SVG файл    | DXF или САПР АССОЛЬ файл |
| Поддерживаемые платформы       | Windows 7+ | Windows 7+          | Веб-браузер | Веб-браузер | Windows 7+               |
| Возможность задания контейнера | Размеры прямоугольника | Произвольная форма | Размеры прямоугольника | Произвольная форма | Размеры прямоугольника |

По итогам сравнения можно сделать вывод, что только одно из рассмотренных программных решений проблемы (AutoNest) позволяет с помощью встроенных инструментов задавать трафареты произвольной формы - во всех остальных случаях необходимо предварительно, с помощью сторонних программ, подготовить трафареты в заданном формате.

Инструменты Nest&Cut и SVGNest работают в веб-браузере, что позволяет работать с ними на разных устройствах, в том числе и на мобильных. Это очень важный параметр, позволяющий увеличить количество пользователей, так как в настоящее время мобильные устройства есть у большего количества людей, чем компьютеры. Также для работы требуется только наличие веб-браузера и не требуется дополнительно устанавливать другие ПО.

Все рассмотренные аналоги поодерживают стандартные прямоугольные формы контейнеров. Два из них (AutoNest и SVGNest) позволяют также задавать произвольную форму контейнеров. Данный факт значительно расширяет круг задач, которые могут решать эти два аналога.

## Выбор метода решения
Обзор существующих программных решений поставленной проблемы помог выявить значительные их недостатки, такие как:
- отсутствие возможности задания произвольных трафаретов в самой программе, что влечёт за собой использование сторонних ПО для решения данной задачи;
- в большинстве случаев - отсутствие возможности работы на мобильном устройстве, а те аналоги, которые позволяют это делать, предоставляют эту возможность посредством работы в веб-браузере, что требует обязательного подключения к Интернету.
Для решения бытовых задач с помощью разрабатываемого мобильного приложения, не всегда требуется столь большая функциональность, которая представлена у рассмотренных аналогов. Достаточно предоставить воможность выбора размеров контейнера, и большая часть данного рода задач уже будет решена. Функция задания формы контейнера расширяет возможности программного решения, но в то же время увеличивает время работы раскладки и накладывает дополнительные сложности на способ задания данной формы.

В результате были сформированы требования к новому программному решению проблемы, которое представляет собой мобильное приложение с функциями распознавания трафаретов произвольной формы и раскладки их в прямоугольнике, одна из сторон которого задана. Решение должно обладать следующими качествами:
- задание трафаретов произвольной формы должно производится в самом приложении, а не с помощью сторонних программ;
- должна присутствовать функция задания пользователем размеров контейнера прямоугольной формы.

Исходя из перечисленных выше условий были сформированы функциональные требования к разрабатываемому приложению.

## Описание метода решения
Новое программное решение поставленной проблемы должно представлять собой мобильное приложение, работающее на операционной системе Android версии 5.0 и выше, и предоставлять возможность задавать трафареты и раскладывать их в прямоугольнике, одна из сторон которого задана, без подключения к сети Интернет.

Решение должно соответствовать следующим функциональным требованиям:
- Приложение должно работать без подключение к сети Интернет, для того, чтобы его можно было использовать независимо от наличия возможности подключения к Глобальной сети.
- Для задания трафаретов необходимо использовать камеру устройства, с помощью которой приложение получит фотографию объекта и определит его контуры. Данный способ задания является наименее затратным по времени и не требует специальных навыков пользователя.
- В силу того, что определить реальные размеры объектов в данном случае не представляется возможным, необходимо, чтобы пользователь задавал длину какой-либо части трафарета, на основании которой будет рассчитываться действительный размер оставшейся части.
- Необходимо предоставить пользователю возможность задавать одну из сторон прямоугольника, в котором будут раскладываться трафареты. Вторая сторона будет вычисляться автоматически на основании разложения.
- Полученное разложение трафаретов должно отображаться пользователю.
- Данные о заданных трафаретах и их разложении должны сохраняться для возможности повторного их использования. Они могут быть удалены по желанию пользователя.

Разрабатываемое приложение предназначено для решения бытовых проблем связанных с разложением трафаретов на плоскости. Зачастую такие задачи допускают наличие погрешности, что делает возможным задание трафаретов с помощью распознавания контуров объектов на фотографии. В связи с небольшим количеством трафаретов в бытовых задачах процесс их раскладки менее трудозатратен, чем в производственных. Это замечание делает возможным реализацию данного программного решения на мобильных устройствах в силу небольших вычислительных затрат. Наличие функции сохранения полученных результатов позволяет использовать их повторно, что в некоторых случаях позволяет сократить время, затрачиваемое на получение результата. Таким образом, в разрабатываемом приложении будут учтены все недостатки существующих программных решений проблемы задания трафаретов и раскладки их в прямоугольнике, одна из сторон которого задана.

## Заключение
В рамках данного исследования была достигнута поставленная цель - формирование требований к новому программному решению проблемы, которое представляет собой мобильное приложение с функциями распознавания трафаретов произвольной формы и раскладки их в прямоугольнике, одна из сторон которого задана. Для этого был проведен сравнительный анализ существующих решений по следующим критериям: "способ задания трафаретов", "поддерживаемые платформы" и "возможность задания контейнера". По результатам сравнения был сделан вывод о существовании недостатков у существующих решений, таких как отсутствие возможности задания произвольных трафаретов в самой программе и отсутствие возможности работы на мобильном устройстве. Из этого следует необходимость разработки нового программного решения проблемы, у которого отсутствуют данные недостатки. Были сформированы функциональные требования, касающиеся способа задания трафаретов, задания стороны прямоугольника, в котором будет производиться раскладка, представления и сохранения полученных результатов.

Направления дальнейших исследований включают в себя увеличение качества распознавания трафаретов по фотографии для уменьшения погрешности решения.

