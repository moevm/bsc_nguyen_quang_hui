# Определение возможного направления развития визуализации экспериментов для симулятора Duckietown

Ключевые слова:  симулятор роботов, визуализация, запись эксперимента

## Аннотация

Целью данной статьи является определение потенциального вектора развития системы визуализации для симулятора duckietown-gym.

В статье были рассмотрены среды gym-duckietown, Gazebo, Carla, Webots, используемые для симуляции автономного транспорта в городских условиях, а также разработанные для них системы визуализации. Среди рассмотренных систем визуализации был выполнен сравнительный анализ по нескольким критериям: возможность записи повтора эксперимента, возможность пошагового просмотра эксперимента, необходимость наличия симулятора для просмотра повтора и объем доступных для просмотра параметров эксперимента. Помимо перечисленных систем визуализации был рассмотрен способ ручной записи проводимых экспериментов с помощью соответствующего программного обеспечения.  

По итогам работы были решены все поставленные задачи, а именно: были выполнены поиск сред для симуляции автономного транспорта и соответствующих им средств визуализации, сравнительный анализ найденных решений и были сформулированы требования к разрабатываемому решению.

## Введение

Автономное управление транспортом является развивающейся областью исследований, которая позволит помочь решить множество проблем, связанных с транспортом [1]: безопасностью и загруженностью на дорогах и удешевит использование автомобилей.

Для обучения и тестирования моделей машинного обучения, предназначенных для решения этой задачи, используют симуляторы автономного транспорта в городских условиях, одним из таких симуляторов является duckietown-gym [2]. Он обладает собственным визуализатором, однако имеет недостаток - в нем отсутствует возможость повторного и пошагового просмотра экспериментов, что усложняет отладку и анализ обученной модели, поэтому цель данной статьи - определение возможного направления развития визуализации экспериментов для симулятора Duckietown. Для достижения этой цели необходимо выполнить следующие задачи:

* Поиск сред для симуляции автономного транспорта
* Поиск программных средств визуализации для каждой из cред симуляции
* Сравнительный анализ найденных решений
* Формирование требований к разрабатываемому решению

Объектом исследования являются среды для симулирования движения автономного транспорта в городских условиях, предметом - визуализация экспериментов симулятора Duckietown.

## Обзор предметной области

### Принцип отбора аналогов

Для формирования требований к разрабатываемой системе визуализации экспериментов для симулятора Duckietown был выполнен поиск его аналогов - сред, позволяющих выполнять симуляцию автономного транспорта. Для этих аналогов и симулятора Duckietown были взяты системы визуализации и было проведено их сравнение по критериям. Далее следует перечисление и краткое описание каждого из аналогов.

**Duckietown-gym** [2]

Симулятор роботов в городских условиях с открытым исходным кодом, имеет встроенную систему визуализации без возможности записи и повторного просмотра эксперимента. Требования к характеристикам компьютера - наличие OpenGL, отсюда вытекает доступность на всех платформах, где присутствует поддержка этой библиотеки, так как симулятор написан на кроссплатформенном языке программирования Python.

**Gazebo** [3]

Симулятор роботов с открытым исходным кодом. Поддерживает Windows, Mac, и Linux. Имеет встроенную систему визуализации с возможностью записи повтора, использующую библиотеку OGRE [4], из-за чего требования производительности к системе, на которой осуществляется визуализация, возрастают: рекомендуется иметь производительный видеоадаптер.

**Carla** [5]

Симулятор автономного транспорта в городских условиях, доступен на Windows, Mac, и Linux. Для визуализации использует средства Unreal Engine 4 [6], из-за чего требования производительности к системе, на которой осуществляется визуализация, значительно возрастают: рекомендуется иметь производительный видеоадаптер и 8 ГБ оперативной памяти. Имеет возможность записи повтора.

**Webots** [7]

Симулятор роботов с открытым исходным кодом. Имеет встроенную систему визуализации. Возможность записи эксперимента отсутствует, однако имеется возможность пошагового выполнения хода эксперимента. Поддерживаемые платформы: Windows, Mac, и Linux. Системные требования: компьютер должен поддерживать NVIDIA или OpenGL и иметь минимум 2 ГБ оперативной памяти.

**Ручная запись**

Помимо систем визуализации, представленных в средах для симуляции роботов, также можно рассмотреть ручную запись хода эксперимента с помощью средств записи изображения с экрана, так как она обладает следующими значительными преимуществами по сравнению с рассмотренными ранее аналогами при воспроизведении записанного повтора среди тех аналогов, где есть такая возможность:

- Низкие требования к производительности системы;
- Нет необходимости в наличии использованной для записи системе визуализации;
- Независимость от платформы.

К недостаткам данного метода можно отнести необходимость ручной работы для записи изображения с экрана - для этого необходимо устанавливать и использовать отдельное приложение. Примером такого приложения может быть OBS Studio [8]. Данное приложение доступно на Windows, Mac, и Linux и для работы с ним рекомендуется иметь 4 ГБ оперативной памяти.

### Критерии сравнения аналогов

#### Возможность записи повтора эксперимента

Некоторые рассмотренные среды проведения экспериментов не предоставляют такой возможности. Повторный просмотр хода эксперимента позволяет упростить отладку и анализ работы обученной модели. Пояснение обозначений:

* \+: Имеется возможность записи эксперимента,
* \-: Возможность записи эксперимента отсутствует.

#### Возможность пошагового просмотра записи эксперимента

Возможность просматривать эксперимент по шагам позволяет упростить отладку и анализ работы обученной модели. В случае, если имеется возможность записи эксперимента, критерий оценивается относительно записи, если такая возможность отсутствует - относительно хода самого эксперимента. Пояснение обозначений:

* \+: Возможность просматривать пошагово эксперимент или его запись присутствует,
* \-: Возможность просматривать пошагово эксперимент или его запись отсутствует.

#### Отображение информации об эксперименте

Возможность видеть различные параметры эксперимента в каждый момент времени во время просмотра повтора позволяет упростить отладку и анализ работы обученной модели. Пояснение обозначений:

* 3: Все параметры эксперимента доступны для отображения или имеется выбор отображаемых параметров,
* 2: Фиксированный набор отображаемых параметров без возможности их изменения,
* 1: Отсутствие данных о параметрах проводившегося эксперимента.

#### Необходимость наличия симулятора для просмотра записи

В некоторых случаях для просмотра записи эксперимента необходимы использованные во время эксперимента симуляторы или средства визуализации. Это повышает системные требования к компьютеру, на котором проигрывается запись эксперимента, и по этой причине просмотр записи на слабых компьютерах или неподдерживаемых симулятором платформах может быть недоступен. Пояснение обозначений:

* \+: Для просмотра записи симулятор необходим,
* \-:  Нет необходимости в наличии симулятора для просмотра записи эксперимента.

### Таблица сравнения по критериям

Сравнение аналогов по каждому из критериев представлено в табл. 1.

Таблица 1

|                                                       | Duckietown-gym | Gazebo | Carla | Webots | Ручная запись |
|:-----------------------------------------------------:|:--------------:|:------:|:-----:|:------:|:-------------:|
|                  Запись эксперимента                  |        -       |    +   |   +   |    -   |       +       |
|                   Пошаговый просмотр                  |        -       |    +   |   -   |    +   |       +       |
|                 Отображение информации                |        -       |    3   |   1   |    3   |       2       |
| Необходимость наличия симулятора для просмотра записи |        -       |    +   |   +   |    -   |       -       |

### Выводы по итогам сравнения

По результатам сравнения можно сделать вывод о том, что ни один из аналогов не соответствует сформированным критериям в полной мере и каждый имеет свои недостатки и преимущества.

В gym-duckietown отсутствует возможность записи проводимых экспериментов и их пошагового просмотра.

Среди рассмотренных симуляторов Gazebo имеет больше всего преимуществ, однако для воспроизведения повтора необходимо наличие симулятора. Это может ухудшить пользовательский опыт использования данного приложения из-за невозможности воспроизвести записанный повтор.

Carla имеет ту же проблему с необходимостью наличия использованного в эксперименте симулятора и в целом по заданным критериям хуже Gazebo.

Симулятор Webots не имеет функции записи эксперимента, однако в нем имеется возможность пошагового выполнения хода эксперимента, и, соответственно, у пользователя имеется доступ ко всем параметрам проводимого эксперимента.

Ручная запись изображения на экране с помощью соответствующего ПО позволяет решить проблему отсутствия функции записи хода эксперимента ценой повышенных трудозатрат от пользователя. Этот метод никогда не требует наличия симулятора, на котором производился эксперимент, и позволяет отображать заранее заданные параметры эксперимента путем их вывода на экран в момент записи.

## Выбор метода решения

Обзор средств визуализации в рассмотренных симуляторах показал преимущества и недостатки различных решений рассматриваемой задачи. Среди преимуществ можно выделить:

* Возможность записи проводимого эксперимента,
* Возможность пошагового просмотра записи проводимого эксперимента,
* Отсутствие необходимости в наличии симулятора для просмотра записи эксперимента.

В результате были сформированы требования к разрабатываемому решению для gym-duckietown:

* Должна иметься возможность записи проводимого эксперимента, что позволит выполнять повторный просмотр и анализ используемой в эксперименте модели,
* Решение должно иметь возможность пошагового просмотра записи эксперимента, что позволит выполнять более подробный анализ модели  и даст возможность просмотра параметров эксперимента в тот или иной момент времени без необходимости перезапускать запись,
* Должна иметься возможность просмотра записи эксперимента в условиях отсутствия доступа к симулятору, в котором данный эксперимент проводился. Это позволит снизить требования к системе, на которой производится проигрывание записи повтора и даст возможность демонстрировать работу модели в условия отсутствия доступа к gym-duckietown.
* Язык программирования - Python, так как с помощью него написана кодовая база симулятора. Будет использоваться графическая библиотека OpenGL, так как ее использует встроенная в gym-duckietown система визуализации, поэтому для выполнения записи эксперимента будет необходим графический адаптер, поддерживающий эту библиотеку.

## Описание метода решения

Симулятор роботов gym-duckietown, включая систему визуализации, имеет открытый исходный код, поэтому вместо разработки принципиально новой системы визуализации можно воспользоваться уже имеющейся. Таким образом, решение должно соответствовать следующим требованиям:

- Используемый язык программирования - Python, так как симулятор, над которым будет проводиться работа, имеет кодовую базу на этом языке,
- Используемая графическая библиотека - OpenGL, так как ее использует система визуализации симулятора,
- Поддержка возможности записи повтора проводимых экспериментов для gym-duckietown и их пошагового просмотра для удобства отладки и анализа модели, действующей в эксперименте
- Хранение повтора в видеозаписи, что предоставит возможность просмотра записанного повтора в условиях отсутствия доступа к симулятору gym-duckietown.

## Заключение

В данной статье с целью определения возможного направления развития системы визуализации gym-duckietown был выполнен обзор программных средств визуализации в различных симуляторах роботов и исследована их возможность записи повтора эксперимента относительно следующих критериев:

- Возможность записи повтора эксперимента
- Возможность пошагового просмотра записи эксперимента
- Полнота отображаемой информации об эксперименте
- Необходимость наличия симулятора для просмотра записи

На основе исследования были определены недостатки системы визуализации в среде gym-duckietown, были сформулированы требования к разрабатываемому решению и сформулировано описание метода решения недостатков системы. В дальнейшем планируется реализовать решение в соответствии с сформулированными требованиями и методами.