# Разработка подхода к решению задачи формирования ассортимента товаров точки розничной торговли

## Аннотация

Компании розничной торговли уделяют особое внимание процессу формирования ассортимента точки розничной торговли с целью повысить прибыль компании. Данный процесс подразумевает анализ большого количества данных о продажах, отнимает у сотрудников много времени и сил. Автоматизация этого процесса позволит увеличить скорость работы не только отдельно взятого сотрудника, но и всей компании. В данной работе проведен сравнительный анализ аналогов и обоснованы преимущества использования искусственных нейронных сетей для решения такого рода задач.  Разработан подход к решению, рассмотрены различные варианты организации структуры сети, а именно - входного и выходного слоев сети, и представлен наиболее содержательный способ. Сформулированы актуальные задачи для развития работы в будущем.

## Введение

У компаний, занимающихся розничной торговлей, часто возникает задача анализа продаж [5]. Анализ проводят с целью определить две группы товаров:

1. товары, которые продаются хорошо (например, в большом количестве и по приемлемым ценам),
2. товары, которые продаются плохо (например, слишком мало продаж).  

Наличие товаров второй группы говорит о недополученной прибыли от продаж. По результатам анализа необходимо внести такие изменения в ассортимент товаров, чтобы недополученную прибыль свести к минимуму. 

Проблема заключается в трудоемком процессе формирования ассортимента товара для точки розничной торговли, так как процесс строится на основе анализа большого количества данных о продажах. На данный момент такая задача чрезвычайно актуальна в силу того, что анализ производится только сотрудниками и отнимает много времени и сил. Использование программного приложения, основанного на специальном подходе, для автоматизации вышеуказанного процесса позволит направлять ресурсы компании на более важные задачи, например, поиск новых клиентов, увеличение занимаемой доли рынка и другие. Автоматизация анализа данных и процесса формирования ассортимента позволит увеличить скорость работы не только отдельно взятого сотрудника, но и всей компании. Использование искусственных нейронных сетей в качестве основы для системы формирования ассортимента - новая область применения искусственных нейронных сетей.

Прежде чем приступать к реализации нейронной сети следует описать ключевые шаги исследуемого процесса, чтобы сформировать структурированный подход к решению. И поэтому цель данной работы - разработать подход к решению задачи формирования ассортимента товаров точки розничной торговли. Объектом исследования данной работы является ассортимент точки розничной торговли и связанные с ним свойства. Предмет исследования - процесс формирования ассортимента точки розничной торговли. Для достижения поставленной цели требуется описать процесс формирования ассортимента и разработать структуру решаемых задач, пригодную для автоматизации.

## Обзор предметной области

### Основные группы методов
Для решения поставленной задачи формирования ассортимента можно использовать различные подходы и методы. При анализе продаж часто основным исследуемым объектом становится спрос покупателей. В [7] рассматривалась задача формирования ассортимента с точки зрения анализа покупательского спроса. Далее представлены три основные группы методов анализа спроса: формализованные, методы прогнозирования и методы оптимизации.

#### Формализованные методы
 В [1] под формализованными методами подразумевают следующие: 

- методы экстраполяции, 
- методы из теории массового обслуживания, 
- статистические методы.

Формализованные методы прогнозирования требуют математической модели исследуемого процесса [1,7]. Если математическую модель невозможно построить, то такие методы не будут достоверно точными.

#### Методы прогнозирования

В [2,3] выделяют в отдельную группу методы прогнозирования и включают сюда следующие: 

- балансовые методы, 
- методы из теории исследования операций, 
- эконометрические методы.

К последней группе относят методы работы с экономическими параметрами и характеристиками [1]. Объединяет вышеперечисленные методы их линейность – недостаток и одновременно достоинство, делающее эти методы весьма популярными [7]. Решения, принятые на основе таких методов, могут оказаться ошибочными.

#### Методы оптимизации

Представляя динамику изменения спроса как некую функцию, для повышения прибыли компании прибегают к использованию методов оптимизации. Методы оптимизации широко используются в задачах анализа поведения целевых функций. Например, методы поиска экстремума функции (градиентный спуск и др.). Параметрами целевой функции применительно к задаче формирования ассортимента могут быть различные характеристики товаров и точек реализации [7].

### Критерии сравнения аналогов

На основе ключевых характеристик процесса формирования ассортимента можно выделить критерии оценки для сравнения искусственных нейронных сетей с аналогами. 

#### Нелинейность

Формирование ассортимента - нелинейный процесс (показано на примере анализа спроса в [2,3]). Нелинейность процесса формирования ассортимента обязательно нужно учитывать.

#### Математическая модель

Разработка математической модели, поиск аналитического вида функции процесса формирования ассортимента - невыполнимая задача [1], поэтому нужен инструмент, не требующий наличие математической модели.

#### Использование опыта

При формировании ассортимента анализируется большое количество данных о продажах - так называемый опыт продаж, который играет главную роль при принятии решений.

### Таблица сравнения по критериям

Результаты сравнения вышеперечисленных аналогов и исследуемого инструмента - искусственной нейронной сети - по определенным выше критериям приведены в таблице далее. 

|                       | Формализованные методы | Методы прогнозирования | Методы оптимизации | Нейронные сети |
| --------------------- | ---------------------- | ---------------------- | ------------------ | -------------- |
| Учет нелинейности     | Нет                    | Есть                   | Есть               | Есть           |
| Математическая модель | Нужна                  | Нужна                  | Нужна              | Не нужна       |
| Использование опыта   | Нет                    | Есть                   | Нет                | Есть           |


### Выводы по итогам сравнения
По итогам сравнения можно сделать вывод, что для решения поставленной задачи формирования ассортимента товаров подходящим инструментом является искусственная нейронная сеть. Использование данного инструмента позволяет моделировать нелинейность исследуемого процесса, не требует наличия математической модели процесса (или аналитического вида функции), и, главное, позволяет в полной мере использовать накопленный опыт продаж. 

## Выбор метода решения
В результате сравнения аналогов были показаны преимущества использования искусственной нейронной сети в качестве инструмента. 

Искусственная нейронная сеть не требует наличия математической модели процесса или наличия аналитического представления функции зависимости параметров исследуемого процесса. Искусственная нейронная сеть позволяет моделировать нелинейность поведения исследуемого процесса формирования ассортимента точки розничной торговли. Моделирование нелинейности процесса в некоторых случаях позволяет выявлять *шаблоны поведения* процесса в определенных условиях. Выявленные шаблоны поведения могут помочь при исследовании временных рядов - один из видов представления данных о продажах. Временные ряды, в свою очередь, подвержены влиянию эффектов сезонности и наличия трендов, искажающих действительную картину (на основе выявленных шаблонов можно проводить десезонализацию и детрендинг) [7].  Главное преимущество использования искусственной нейронной сети заключается в том, что этот инструмент позволяет в полной мере использовать накопленный опыт продаж (после предварительной обработки данных можно формировать обучающие выборки и выборки для тестирования).

Более того, как показано в [4], использование искусственной нейронной сети при решении задач прогнозирования продаж (с целью определить оптимальный ассортимент с точки зрения увеличения прибыли) может обеспечить разницу между прогнозируемыми результатами и фактическими данными всего лишь на 10%.

Однако, использование искусственной нейронной сети требует от разработчиков точно определиться с архитектурой сети (например, рекуррентные сети (см. рис. 1), сети Хопфилда, или сети на основе метода обратного распространения ошибки). 

Можно построить подход к задаче формирования ассортимента на основе использования нейронной сети, в котором архитектуру нейронной сети будем рассматривать с точки зрения количества нейронов на входном и выходном слоях, причем количество зависит от объекта исследования и его свойств. Другие ключевые элементы архитектуры (количество внутренних слоев, алгоритмы обучения, функции активации нейронов и пр.) можно рассмотреть в качестве продолжения данного исследования.

## Описание метода решения

При решении задачи формирования ассортимента товаров анализируют историю поведения товара, например, как этот товар покупался в прошлом (до момента начала анализа) [1,2]. Прогнозируя поведение товара в будущем, можно сделать выводы, увеличит ли изменение количества товара суммарную прибыль точки розничной торговли [2]. При разработке подхода к решению задачи формирования ассортимента и при проектировании искусственной нейронной сети первый шаг - обработка накопленной информации. Данные о продажах представлены значениями характеристик товаров в разные моменты времени.  

Множество факторов (характеристик), с помощью которых можно описать товар, можно условно разделить на внешние и внутренние [3]. Внешние факторы характеризуют особенности точки реализации товара: место расположения (шаговая доступность, наличие каких-либо элементов инфраструктуры поблизости); средний финансовый уровень покупателей; вкусовые предпочтения, сформированные с течением времени и др. К внутренним факторам можно отнести себестоимость товара, закупочную и продажную цены, физические размеры товара (высота, ширина, емкость или объем упаковки) и др.

### Общий подход к решению

Решение задачи формирования ассортимента путем использования искусственных нейронных сетей, в первую очередь, требует определиться с количеством нейронов на входном и выходом слоях [4]. 

Количество нейронов на входном слое может быть определено на основании выделенных факторов (свойств ![img](http://latex.codecogs.com/svg.latex?%24%24p_i%2Ci%3D1%20%5Cdots%20K%24%24)), описывающих товар конкретной точки реализации (внутренние и внешние факторы, как упоминалось ранее). Количество факторов ![img](http://latex.codecogs.com/svg.latex?%24K%24) может быть достаточно велико, возможно потребуется прибегнуть к снижению размерности факторного пространства. Снижение может быть произведено путем экспертной оценки факторов в отдельности и их взаимного влияния друг на друга. После отсеивания факторов экспертом не исключено использование методов статистического анализа для демонстрации состоятельности обозначенного набора факторов. В дополнение к методу экспертной оценки (в некоторых случаях - вместо) могут использоваться методы линейного дискриминантного анализа.

На рис. 1 представлены структуры прямой (*feedforward*) нейронной сети (слева) и рекуррентной нейронной сети (справа) (стрелками продемонстрированы направления связей внутри сети)[6].

<figure>
   <p><img src="./pics/NN-scheme-1.bmp" width="500" align="middle"></p>
   <figcaption> Рисунок 1. Примеры структур нейронной сети [6]</figcaption>
 </figure>
</body>

Количество нейронов на выходном слое зависит от цели применения искусственной  нейронной сети. Например, необходимо принять решение в отношении каждого товара: оставлять данный товар или убирать. При такой постановке задачи выходной нейрон - один с бинарным результатом: 1 - товар оставлять, 0 - товар убирать. Если же рассматривать задачу прогнозирования (какой-либо характеристики товара, например, маржинальности или прибыли) тогда нейрон на выходном слое потребуется тоже один, а ответ для этой задачи - вещественное число, соответствующее будущему значению спроса, прибыли и пр.

### Особый подход к решению

Особый интерес представляет задача подробного анализа товаров. Подробный анализ подразумевает исследование товаров с двух точек зрения:

1. Что продается хорошо (что можно продублировать)?
2. Что продается плохо (что необходимо удалить)?

Решение первой задачи на выходе дает перечень товаров, для которых необходимо найти место в точке реализации (множество необходимых мест: ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B1%7D%24%)). Решение второй дает перечень товаров, которые необходимо удалить, то есть освобождаются определенные места (множество освобождающихся мест: ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B2%7D%24%)). 

Освобождение мест может проходить по двум сценариям: 

1. товар удаляется полностью (больше в этой точке реализации не будет продаваться),
2. товар удаляется частично (например, когда товар занимал несколько мест, и продажи товара были не со всех мест - некоторые места простаивали - имеет место недополученная прибыль). 

В связи с наличием у товара физических характеристик множества ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B1%7D%24%) и ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B2%7D%24%) могут полностью совпадать (необходимые места ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B1%7D%24%) автоматически компенсируются освобождающимися местами ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B2%7D%24%)), но и могут не пересекаться вовсе. Последний случай (*X-случай*) усложняет анализ, и возникают дополнительные задачи:

1. Найти место для установки товаров-дубликатов.
2. Найти товары, которые целесообразно поставить на места удаляемых товаров.

На рис. 2 представлен случай с пересечением множеств ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B1%7D%24%) и ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B2%7D%24%).

<figure>
   <p><img src="./pics/scheme.bmp" width="500" align="middle"></p>
   <figcaption>Рисунок 2. Представление задачи в виде множеств</figcaption>
 </figure>

Пусть ![img](http://latex.codecogs.com/svg.latex?%24M_%5Ccap%24%) - пересечение множеств, определяемое так: ![img](http://latex.codecogs.com/svg.latex?%24M_%5Ccap%20%3D%20M_1%20%5Ccap%20M_2%24). Множества ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B1%7D%24%) и ![img](http://latex.codecogs.com/svg.latex?%24%7BM%7D_%7B2%7D%24%) могут совпадать частично, то есть множество ![img](http://latex.codecogs.com/svg.latex?%24M_%5Ccap%24%) не пусто (см. рис. 2). 

Формируя полный список задач, отсортируем их по возрастанию сложности:

1. Распределение товаров-дубликатов на места ![img](http://latex.codecogs.com/svg.latex?%24M_%5Ccap%24%) - дублировать известные товары на известные места. 
2. Рассмотреть *X-случай* для множеств: ![img](http://latex.codecogs.com/svg.latex?%24%28M_1%20-%20M_%5Ccap%29%24), ![img](http://latex.codecogs.com/svg.latex?%24%28M_2%20-%20M_%5Ccap%29%24), а именно:
- Найти места для товаров, которые требуется продублировать (необходимо так организовать дополнительный поиск мест, чтобы освободить места ![img](http://latex.codecogs.com/svg.latex?%24%28M_1%20-%20M_%5Ccap%29%24), на которые установка дубликатов целесообразна).
- Задача поиска товаров на замену для заполнения мест ![img](http://latex.codecogs.com/svg.latex?%24%28M_2%20-%20M_%5Ccap%29%24). 

Стоит заметить, что автоматическое дублирование в п. 1 может привести к неуместной однородности товара, например, когда одним и тем же товаром заполняются многочилсенные места, требуется дополнительный контроль заполнения мест.

Задача поиска товаров на замену включает рассмотрение не только товаров конкретной точки реализации, но и товары других аналогичных точек, и, более того, все товары конкретной компании, занимающейся розничной торговлей.

В искусственной нейронной сети, решающей вышеописанный подход, на входном слое должно быть столько нейронов, сколько товаров рассматривается для конкретной точки реализации (как сообщать нейронной сети характеристики этих товаров - *открытая задача*). На выходном слое количество нейронов то же, что и на входном, но каждый нейрон отвечает за соответствующий товар и несет информацию из следующего списка (в скобках указан код результата для примера):

1. Данный товар оставить без изменений (0).
2. Данный товар необходимо удалить в количестве ![img](http://latex.codecogs.com/svg.latex?%24N%24%) штук ![img](http://latex.codecogs.com/svg.latex?%24%28-N%29%24%).
3. Данный товар надо дублировать и поставить на место ![img](http://latex.codecogs.com/svg.latex?%24M_i%24)(![img](http://latex.codecogs.com/svg.latex?%24i%24%) - целочисленная характеристика места, например, номер).

Выдача информации в таком виде однозначно определяет перечень действий по формированию ассортимента товара точки реализации. 

Данными для обучения искусственной нейронной сети будут служить данные о продаж - значения факторов (или характеристик) товара за некоторый промежуток времени.

Представляет интерес для дальнейшего исследования вопрос предоставления информации о причинах дублирования или удаления товаров. Так же требуется в дальнейшем решить задачи выбора алгоритма обучения, количества внутренних слоев и количества нейронов на них, функций активации, а также реализации и апробирования искусственной нейронной сети, моделирующей логику, представленную выше.

## Заключение
В данной статье представлен подход к решению задачи формирования ассортимента товаров точки розничной торговли с примерами формирования архитектуры искусственной нейронной сети. Выделены критерии оценки и обоснованы основные преимущества искусственных нейронных сетей перед аналогами: возможность моделирования нелинейных процессов, отсутствие необходимости иметь аналитический вид зависимости или математическую модель, и, главное, возможность учитывать накопленный опыт.

В качестве примеров формирования архитектуры нейронной сети были рассмотрены различные варианты количества нейронов на входном и выходном слое, начиная от простых случаев: ![img](http://latex.codecogs.com/svg.latex?%24N%24%) нейронов на входном слое (отвечают за ![img](http://latex.codecogs.com/svg.latex?%24N%24%) характеристик товара) и 1 нейрон на выходном слое (значение зависит от задачи), заканчивая сложными - количество нейронов на входном и на выходном слоях соответствуют количеству рассматриваемых товаров. Также было отмечено, что в последнем случае возникают дополнительные задачи: передача характеристик товаров нейронной сети и получение по результатам работы информации о причинах тех или иных действий в отношении товара (оставление без изменений, удаление или дублирование).

Следует заметить, что *особый интерес* для дальнейшего исследования представляют практические задачи разработки и апробирования искусственной нейронной сети, реализующей представленный в работе подход.

## Список литературы
1. Тихонов Э.Е. Методы прогнозирования в условиях рынка: учебное пособие. – Невинномысск, 2006. – 221 с.
2. Бугорский В.Н., Никитин Н.А. Нейронные сети в управлении розничной торговлей // IT-менеджмент. Реальная коммерция. Прикладная информатика 2006. № 2. С. 34 - 41.
3. Ибрагимов А.У., Ибрагимова Л.А., Гильмуллина Г.И. Применение методов искусственного интеллекта для анализа и прогноза товарооборота розничного торгового предприятия // Вестник Самарского государственного аэрокосмического университета 2012. № 1 (32). С. 233-241.
4. Penpece D. Elma O.E. Predicting Sales Revenue by Using Artificial Neural Network in Grocery Retailing Industry: A Case Study in Turkey / International Journal of Trade, Economics and Finance. October 2014. Vol. 5. No. 5. PP. 435 – 440.
5. Фетисова О.В. Современные тенденции развития мировой розничной торговли // Вестник Волгоградского государственного университета. Сер. 3, Экономика Экология 2009. № 2 (15). С 61 - 69.
6. Jaeger H. Tutorial on training recurrent neural networks, covering BPPT, RTRL, EKF and the "echo state network" approach / GMD Report 159, German
  National Research Center for Information Technology. 2002. 48 pp.
7. Семенов В.П., Чернокульский В.В., Размочаева Н.В. Исследование искусственного интеллекта в задачах управления розничной торговлей // II Международная научная конференция по проблемам управления в технических системах (СTS'2017). Материалы конференции. Санкт-Петербург. 25 – 27 октября 2017 г. СПб.: СПбГЭТУ «ЛЭТИ». C. 346 - 349.


